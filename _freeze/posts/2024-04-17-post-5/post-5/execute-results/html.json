{
  "hash": "898bbd98f78fb3d983267047a0ebb2cc",
  "result": {
    "markdown": "---\ntitle: \"Post 5\"\nauthor: \"Team 4\"\ndate: \"2024-04-17\"\ndate-modified: \"2024-04-17\"\ndraft: FALSE\n---\n\nThis week we found two datasets to merge our original dataset with. \n\n1.) The first data set that we are merging with is a dataset that includes more specific world regions. Our original dataset only contains 9 different regions (look at the data_example dataframe below). The dataset that we are merging with (named continent_example) contains 17 different regions, which makes our analysis more specified. The original dataset grouped Central and Southern Asia together, and the new dataset does not do this, which allows us to find more differences within countries. This dataset was found from this link: https://www.kaggle.com/datasets/andradaolteanu/country-mapping-iso-continent-region.\n\n2.) The second dataset that we are merging with is a PISA dataset that contains PISA scores from countries all over the world. PISA is a standardized exam that is taken all around the world. Knowing these scores will allow us to make more exciting and interesting models that may provide more insight into the disparties between countries. What is cool about this dataset is that it contains the overall PISA score, but also the breakdowns. For example, it contains each country's overall score, as well as each country's math, science, and reading score. The downside of this dataset is that it does not contain scores from African countries. This dataset was found from this link: https://www.oecd.org/pisa/data/.\n\nThese are the two datasets that we have merged our original datset; however, there are a few more datasets that we are considering. We want to merge our dataset with some sort of teacher salary dataset as that may provide some insight into why the PISA scores are the way they are. Additionaly, we want to add years to the PISA scores. We only included PISA scores from 2022, and it may be interesting to include PISA scores from specific years.\n\nhttps://www.kaggle.com/datasets/andradaolteanu/country-mapping-iso-continent-region\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(tidymodels))\nsuppressPackageStartupMessages(library(broom))\nsuppressPackageStartupMessages(library(scales))\n\ndata <- read_csv('dataset/educ.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 212969 Columns: 86\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (14): iso_code, region_group, income_group, country, survey, level, cate...\ndbl (72): year, grade, comp_prim_v2_m, comp_lowsec_v2_m, comp_upsec_v2_m, co...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\ncontinent <- read_csv('dataset/continents2.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 249 Columns: 11\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (7): name, alpha-2, alpha-3, iso_3166-2, region, sub-region, intermediat...\ndbl (4): country-code, region-code, sub-region-code, intermediate-region-code\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\npisa <- read_csv('dataset/pisa-scores-by-country-2024.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 81 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): country\ndbl (5): OverallPisaScore2022, PISAScoresMathScore2022, PISAScoresScienceSco...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\ndata_example <- data |> group_by(region_group) |> slice_head(n = 1) \ndata_example\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 86\n# Groups:   region_group [8]\n  iso_code region_group   income_group country survey  year level grade category\n  <chr>    <chr>          <chr>        <chr>   <chr>  <dbl> <chr> <dbl> <chr>   \n1 AFG      Central and S… Low income … Afghan… DHS     2015 <NA>     NA Ethnici…\n2 CHN      Eastern and S… Upper middl… China   CFPS    2010 <NA>     NA Ethnici…\n3 ALB      Europe and No… Upper middl… Albania DHS     2009 <NA>     NA Ethnici…\n4 ARG      Latin America… Upper middl… Argent… EPH     2004 <NA>     NA Region  \n5 ARE      Northern Afri… High income… U. A. … PIRLS   2011 Prim…     4 Location\n6 AUS      Oceania        High income… Austra… HES-S…  2010 <NA>     NA Ethnici…\n7 AGO      Sub-Saharan A… Lower middl… Angola  DHS     2015 <NA>     NA Location\n8 <NA>     <NA>           Low income … <NA>    <NA>      NA <NA>     NA Total   \n# ℹ 77 more variables: Sex <chr>, Location <chr>, Wealth <chr>, Region <chr>,\n#   Ethnicity <chr>, Religion <chr>, Language <chr>, comp_prim_v2_m <dbl>,\n#   comp_lowsec_v2_m <dbl>, comp_upsec_v2_m <dbl>, comp_prim_1524_m <dbl>,\n#   comp_lowsec_1524_m <dbl>, comp_upsec_2029_m <dbl>, eduyears_2024_m <dbl>,\n#   edu2_2024_m <dbl>, edu4_2024_m <dbl>, eduout_prim_m <dbl>,\n#   eduout_lowsec_m <dbl>, eduout_upsec_m <dbl>, comp_prim_v2_no <dbl>,\n#   comp_lowsec_v2_no <dbl>, comp_upsec_v2_no <dbl>, comp_prim_1524_no <dbl>, …\n```\n:::\n\n```{.r .cell-code}\ncontinent_example <- continent |> group_by(`sub-region`) |> slice_head(n=1)\ncontinent_example\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 18 × 11\n# Groups:   sub-region [18]\n   name      `alpha-2` `alpha-3` `country-code` `iso_3166-2` region `sub-region`\n   <chr>     <chr>     <chr>              <dbl> <chr>        <chr>  <chr>       \n 1 Australia AU        AUS                   36 ISO 3166-2:… Ocean… Australia a…\n 2 Kazakhst… KZ        KAZ                  398 ISO 3166-2:… Asia   Central Asia\n 3 China     CN        CHN                  156 ISO 3166-2:… Asia   Eastern Asia\n 4 Belarus   BY        BLR                  112 ISO 3166-2:… Europe Eastern Eur…\n 5 Anguilla  AI        AIA                  660 ISO 3166-2:… Ameri… Latin Ameri…\n 6 Fiji      FJ        FJI                  242 ISO 3166-2:… Ocean… Melanesia   \n 7 Guam      GU        GUM                  316 ISO 3166-2:… Ocean… Micronesia  \n 8 Algeria   DZ        DZA                   12 ISO 3166-2:… Africa Northern Af…\n 9 Bermuda   BM        BMU                   60 ISO 3166-2:… Ameri… Northern Am…\n10 Åland Is… AX        ALA                  248 ISO 3166-2:… Europe Northern Eu…\n11 American… AS        ASM                   16 ISO 3166-2:… Ocean… Polynesia   \n12 Brunei D… BN        BRN                   96 ISO 3166-2:… Asia   South-easte…\n13 Afghanis… AF        AFG                    4 ISO 3166-2:… Asia   Southern As…\n14 Albania   AL        ALB                    8 ISO 3166-2:… Europe Southern Eu…\n15 Angola    AO        AGO                   24 ISO 3166-2:… Africa Sub-Saharan…\n16 Armenia   AM        ARM                   51 ISO 3166-2:… Asia   Western Asia\n17 Austria   AT        AUT                   40 ISO 3166-2:… Europe Western Eur…\n18 Antarcti… AQ        ATA                   10 ISO 3166-2:… <NA>   <NA>        \n# ℹ 4 more variables: `intermediate-region` <chr>, `region-code` <dbl>,\n#   `sub-region-code` <dbl>, `intermediate-region-code` <dbl>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncontinent <- continent |>\n  rename(\n    country = name,\n    sub_region = `sub-region`\n  )\n\n#continent\nmerged_data <- merge(data, continent, by = \"country\")\nmerged_data2 <- merge(merged_data, pisa, by = \"country\")\nhead(pisa)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 6\n  country     OverallPisaScore2022 PISAScoresMathScore2…¹ PISAScoresScienceSco…²\n  <chr>                      <dbl>                  <dbl>                  <dbl>\n1 China                       1605                    552                    543\n2 United Sta…                 1468                    465                    499\n3 Indonesia                   1108                    366                    383\n4 Brazil                      1192                    379                    403\n5 Mexico                      1220                    395                    410\n6 Japan                       1599                    536                    547\n# ℹ abbreviated names: ¹​PISAScoresMathScore2022, ²​PISAScoresScienceScore2022\n# ℹ 2 more variables: PISAScoresReadingScore2022 <dbl>,\n#   PISAScoresOverallScore2018 <dbl>\n```\n:::\n\n```{.r .cell-code}\nhead(merged_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      country iso_code              region_group         income_group survey\n1 Afghanistan      AFG Central and Southern Asia Low income countries   MICS\n2 Afghanistan      AFG Central and Southern Asia Low income countries    DHS\n3 Afghanistan      AFG Central and Southern Asia Low income countries    DHS\n4 Afghanistan      AFG Central and Southern Asia Low income countries    DHS\n5 Afghanistan      AFG Central and Southern Asia Low income countries    DHS\n6 Afghanistan      AFG Central and Southern Asia Low income countries   MICS\n  year level grade              category    Sex Location     Wealth    Region\n1 2011  <NA>    NA Sex & Wealth & Region Female     <NA> Quintile 4 Region CH\n2 2015  <NA>    NA       Wealth & Region   <NA>     <NA> Quintile 2   Helmand\n3 2015  <NA>    NA          Sex & Region   Male     <NA>       <NA>  Kandahar\n4 2015  <NA>    NA Sex & Wealth & Region Female     <NA> Quintile 5    Ghazni\n5 2015  <NA>    NA Sex & Wealth & Region   Male     <NA> Quintile 3   Jawzjan\n6 2011  <NA>    NA Sex & Wealth & Region Female     <NA> Quintile 3  Region N\n  Ethnicity Religion Language comp_prim_v2_m comp_lowsec_v2_m comp_upsec_v2_m\n1      <NA>     <NA>     <NA>         0.5761           0.2988          0.1509\n2      <NA>     <NA>     <NA>         0.3533           0.1675          0.1572\n3      <NA>     <NA>     <NA>         0.4692           0.2788          0.1677\n4      <NA>     <NA>     <NA>         0.7914           0.6618              NA\n5      <NA>     <NA>     <NA>         0.8165               NA              NA\n6      <NA>     <NA>     <NA>         0.2880           0.0678          0.0211\n  comp_prim_1524_m comp_lowsec_1524_m comp_upsec_2029_m eduyears_2024_m\n1           0.4383             0.3015            0.1290              NA\n2           0.2763             0.1727            0.0666          2.4788\n3           0.3768             0.2165            0.1139          3.2615\n4           0.5969             0.4152            0.1773          2.7868\n5           0.8459             0.6850            0.4035              NA\n6           0.1653             0.0720            0.0063              NA\n  edu2_2024_m edu4_2024_m eduout_prim_m eduout_lowsec_m eduout_upsec_m\n1          NA          NA            NA              NA             NA\n2      0.7219      0.7396            NA              NA             NA\n3      0.6230      0.6530            NA              NA             NA\n4      0.7139      0.7139            NA              NA             NA\n5          NA          NA            NA              NA             NA\n6          NA          NA            NA              NA             NA\n  comp_prim_v2_no comp_lowsec_v2_no comp_upsec_v2_no comp_prim_1524_no\n1              70                60               39               195\n2             116                66               78               302\n3             254               197              176               703\n4              38                38               NA               111\n5              45                NA               NA                87\n6             121                99               64               340\n  comp_lowsec_1524_no comp_upsec_2029_no eduyears_2024_no edu2_2024_no\n1                 195                144               NA           NA\n2                 302                275              131          131\n3                 703                548              292          292\n4                 111                 73               39           39\n5                  87                 62               NA           NA\n6                 340                238               NA           NA\n  edu4_2024_no eduout_prim_no eduout_lowsec_no eduout_upsec_no preschool_3_m\n1           NA             NA               NA              NA            NA\n2          131             NA               NA              NA            NA\n3          292             NA               NA              NA            NA\n4           39             NA               NA              NA            NA\n5           NA             NA               NA              NA            NA\n6           NA             NA               NA              NA            NA\n  preschool_3_no preschool_1ybefore_m preschool_1ybefore_no edu0_prim_m\n1             NA                   NA                    NA          NA\n2             NA                   NA                    NA      0.4917\n3             NA                   NA                    NA      0.4670\n4             NA                   NA                    NA      0.0621\n5             NA                   NA                    NA      0.1411\n6             NA                   NA                    NA          NA\n  edu0_prim_no trans_prim_m trans_prim_no trans_lowsec_m trans_lowsec_no\n1           NA           NA            NA             NA              NA\n2          318       0.9143            56             NA              NA\n3          529       0.8899           173         0.8869              99\n4           64       0.9677            40         0.9592              32\n5           67       0.9420            46             NA              NA\n6           NA           NA            NA             NA              NA\n  comp_higher_2yrs_2529_m comp_higher_2yrs_2529_no comp_higher_4yrs_2529_m\n1                      NA                       NA                      NA\n2                       0                      147                       0\n3                       0                      258                       0\n4                       0                       39                       0\n5                       0                       32                       0\n6                      NA                       NA                      NA\n  comp_higher_4yrs_2529_no comp_higher_4yrs_3034_m comp_higher_4yrs_3034_no\n1                       NA                      NA                       NA\n2                      147                       0                       89\n3                      258                       0                      166\n4                       39                      NA                       NA\n5                       32                      NA                       NA\n6                       NA                      NA                       NA\n  attend_higher_1822_m attend_higher_1822_no overage2plus_m overage2plus_no\n1                   NA                    NA             NA              NA\n2               0.0490                   151         0.1347             229\n3               0.0836                   397         0.3825             455\n4               0.3522                    63         0.1203              72\n5               0.2364                    47         0.2538              81\n6                   NA                    NA             NA              NA\n  literacy_1524_m literacy_1524_no mlevel1_m mlevel1_no rlevel1_m rlevel1_no\n1              NA               NA        NA         NA        NA         NA\n2          0.4960              102        NA         NA        NA         NA\n3          0.5592              111        NA         NA        NA         NA\n4          0.5360               31        NA         NA        NA         NA\n5              NA               NA        NA         NA        NA         NA\n6              NA               NA        NA         NA        NA         NA\n  slevel1_m slevel1_no mlevel2_m mlevel2_no rlevel2_m rlevel2_no slevel2_m\n1        NA         NA        NA         NA        NA         NA        NA\n2        NA         NA        NA         NA        NA         NA        NA\n3        NA         NA        NA         NA        NA         NA        NA\n4        NA         NA        NA         NA        NA         NA        NA\n5        NA         NA        NA         NA        NA         NA        NA\n6        NA         NA        NA         NA        NA         NA        NA\n  slevel2_no mlevel3_m mlevel3_no rlevel3_m rlevel3_no slevel3_m slevel3_no\n1         NA        NA         NA        NA         NA        NA         NA\n2         NA        NA         NA        NA         NA        NA         NA\n3         NA        NA         NA        NA         NA        NA         NA\n4         NA        NA         NA        NA         NA        NA         NA\n5         NA        NA         NA        NA         NA        NA         NA\n6         NA        NA         NA        NA         NA        NA         NA\n  mlevel4_m mlevel4_no rlevel4_m rlevel4_no slevel4_m slevel4_no alpha-2\n1        NA         NA        NA         NA        NA         NA      AF\n2        NA         NA        NA         NA        NA         NA      AF\n3        NA         NA        NA         NA        NA         NA      AF\n4        NA         NA        NA         NA        NA         NA      AF\n5        NA         NA        NA         NA        NA         NA      AF\n6        NA         NA        NA         NA        NA         NA      AF\n  alpha-3 country-code    iso_3166-2 region    sub_region intermediate-region\n1     AFG            4 ISO 3166-2:AF   Asia Southern Asia                <NA>\n2     AFG            4 ISO 3166-2:AF   Asia Southern Asia                <NA>\n3     AFG            4 ISO 3166-2:AF   Asia Southern Asia                <NA>\n4     AFG            4 ISO 3166-2:AF   Asia Southern Asia                <NA>\n5     AFG            4 ISO 3166-2:AF   Asia Southern Asia                <NA>\n6     AFG            4 ISO 3166-2:AF   Asia Southern Asia                <NA>\n  region-code sub-region-code intermediate-region-code\n1         142              34                       NA\n2         142              34                       NA\n3         142              34                       NA\n4         142              34                       NA\n5         142              34                       NA\n6         142              34                       NA\n```\n:::\n\n```{.r .cell-code}\nhead(merged_data2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  country iso_code                region_group                  income_group\n1 Albania      ALB Europe and Northern America Upper middle income countries\n2 Albania      ALB Europe and Northern America Upper middle income countries\n3 Albania      ALB Europe and Northern America Upper middle income countries\n4 Albania      ALB Europe and Northern America Upper middle income countries\n5 Albania      ALB Europe and Northern America Upper middle income countries\n6 Albania      ALB Europe and Northern America Upper middle income countries\n  survey year           level grade                category    Sex Location\n1    DHS 2009            <NA>    NA   Sex & Wealth & Region   Male     <NA>\n2   PISA 2009 Upper secondary    NA Location & Sex & Wealth Female    Urban\n3   PISA 2012 Upper secondary    NA Location & Sex & Wealth Female    Urban\n4    DHS 2009            <NA>    NA Location & Sex & Wealth Female    Urban\n5   MICS 2005            <NA>    NA            Sex & Region Female     <NA>\n6   MICS 2000            <NA>    NA                  Wealth   <NA>     <NA>\n      Wealth  Region Ethnicity Religion Language comp_prim_v2_m\n1 Quintile 4 Coastal      <NA>     <NA>     <NA>         1.0000\n2 Quintile 5    <NA>      <NA>     <NA>     <NA>             NA\n3 Quintile 2    <NA>      <NA>     <NA>     <NA>             NA\n4 Quintile 3    <NA>      <NA>     <NA>     <NA>         0.9721\n5       <NA>  Tirana      <NA>     <NA>     <NA>             NA\n6 Quintile 1    <NA>      <NA>     <NA>     <NA>             NA\n  comp_lowsec_v2_m comp_upsec_v2_m comp_prim_1524_m comp_lowsec_1524_m\n1           0.7303              NA           0.9969             0.6819\n2               NA              NA               NA                 NA\n3               NA              NA               NA                 NA\n4           0.7413           0.367           0.9379             0.4985\n5               NA              NA               NA                 NA\n6               NA              NA               NA                 NA\n  comp_upsec_2029_m eduyears_2024_m edu2_2024_m edu4_2024_m eduout_prim_m\n1            0.5380         11.2648      0.0000      0.0000        0.1064\n2                NA              NA          NA          NA            NA\n3                NA              NA          NA          NA            NA\n4            0.3462          8.7861      0.0681      0.0681        0.0298\n5                NA              NA      0.0000      0.0000            NA\n6                NA              NA      0.0000      0.0000            NA\n  eduout_lowsec_m eduout_upsec_m comp_prim_v2_no comp_lowsec_v2_no\n1          0.0117         0.3059              54                57\n2              NA             NA              NA                NA\n3              NA             NA              NA                NA\n4          0.0981         0.2145              93                53\n5              NA             NA              NA                NA\n6              NA             NA              NA                NA\n  comp_upsec_v2_no comp_prim_1524_no comp_lowsec_1524_no comp_upsec_2029_no\n1               NA               134                 134                 62\n2               NA                NA                  NA                 NA\n3               NA                NA                  NA                 NA\n4               53               190                 190                140\n5               NA                NA                  NA                 NA\n6               NA                NA                  NA                 NA\n  eduyears_2024_no edu2_2024_no edu4_2024_no eduout_prim_no eduout_lowsec_no\n1               37           37           37             71               68\n2               NA           NA           NA             NA               NA\n3               NA           NA           NA             NA               NA\n4               79           79           79            120              119\n5              172          172          172             NA               NA\n6              204          204          204             NA               NA\n  eduout_upsec_no preschool_3_m preschool_3_no preschool_1ybefore_m\n1              59            NA             NA                   NA\n2              NA            NA             NA                   NA\n3              NA            NA             NA                   NA\n4              80            NA             NA                   NA\n5              NA        0.3219             47                   NA\n6              NA            NA             NA                   NA\n  preschool_1ybefore_no edu0_prim_m edu0_prim_no trans_prim_m trans_prim_no\n1                    NA      0.0346           87       0.7042            67\n2                    NA          NA           NA           NA            NA\n3                    NA          NA           NA           NA            NA\n4                    NA      0.0394          135       0.7212            91\n5                    NA      0.0054          186           NA            NA\n6                    NA          NA           NA           NA            NA\n  trans_lowsec_m trans_lowsec_no comp_higher_2yrs_2529_m\n1         0.8422              37                      NA\n2             NA              NA                      NA\n3             NA              NA                      NA\n4         0.9644              41                  0.1093\n5             NA              NA                      NA\n6             NA              NA                      NA\n  comp_higher_2yrs_2529_no comp_higher_4yrs_2529_m comp_higher_4yrs_2529_no\n1                       NA                      NA                       NA\n2                       NA                      NA                       NA\n3                       NA                      NA                       NA\n4                       56                  0.0911                       56\n5                       NA                      NA                       NA\n6                       NA                      NA                       NA\n  comp_higher_4yrs_3034_m comp_higher_4yrs_3034_no attend_higher_1822_m\n1                  0.0604                       33               0.1049\n2                      NA                       NA                   NA\n3                      NA                       NA                   NA\n4                  0.0464                       74               0.1818\n5                      NA                       NA               0.1350\n6                      NA                       NA                   NA\n  attend_higher_1822_no overage2plus_m overage2plus_no literacy_1524_m\n1                    60         0.0366             123          0.9742\n2                    NA             NA              NA              NA\n3                    NA             NA              NA              NA\n4                    84         0.0955             213          0.9611\n5                   177         0.0126             146          0.9968\n6                    NA             NA              NA              NA\n  literacy_1524_no mlevel1_m mlevel1_no rlevel1_m rlevel1_no slevel1_m\n1              107        NA         NA        NA         NA        NA\n2               NA        NA         NA        NA         NA        NA\n3               NA        NA         NA        NA         NA        NA\n4              339        NA         NA        NA         NA        NA\n5              966        NA         NA        NA         NA        NA\n6               NA        NA         NA        NA         NA        NA\n  slevel1_no mlevel2_m mlevel2_no rlevel2_m rlevel2_no slevel2_m slevel2_no\n1         NA        NA         NA        NA         NA        NA         NA\n2         NA        NA         NA        NA         NA        NA         NA\n3         NA        NA         NA        NA         NA        NA         NA\n4         NA        NA         NA        NA         NA        NA         NA\n5         NA        NA         NA        NA         NA        NA         NA\n6         NA        NA         NA        NA         NA        NA         NA\n  mlevel3_m mlevel3_no rlevel3_m rlevel3_no slevel3_m slevel3_no mlevel4_m\n1        NA         NA        NA         NA        NA         NA        NA\n2        NA         NA        NA         NA        NA         NA        NA\n3        NA         NA        NA         NA        NA         NA        NA\n4        NA         NA        NA         NA        NA         NA        NA\n5        NA         NA        NA         NA        NA         NA        NA\n6        NA         NA        NA         NA        NA         NA        NA\n  mlevel4_no rlevel4_m rlevel4_no slevel4_m slevel4_no alpha-2 alpha-3\n1         NA        NA         NA        NA         NA      AL     ALB\n2         NA        NA         NA        NA         NA      AL     ALB\n3         NA        NA         NA        NA         NA      AL     ALB\n4         NA        NA         NA        NA         NA      AL     ALB\n5         NA        NA         NA        NA         NA      AL     ALB\n6         NA        NA         NA        NA         NA      AL     ALB\n  country-code    iso_3166-2 region      sub_region intermediate-region\n1            8 ISO 3166-2:AL Europe Southern Europe                <NA>\n2            8 ISO 3166-2:AL Europe Southern Europe                <NA>\n3            8 ISO 3166-2:AL Europe Southern Europe                <NA>\n4            8 ISO 3166-2:AL Europe Southern Europe                <NA>\n5            8 ISO 3166-2:AL Europe Southern Europe                <NA>\n6            8 ISO 3166-2:AL Europe Southern Europe                <NA>\n  region-code sub-region-code intermediate-region-code OverallPisaScore2022\n1         150              39                       NA                 1102\n2         150              39                       NA                 1102\n3         150              39                       NA                 1102\n4         150              39                       NA                 1102\n5         150              39                       NA                 1102\n6         150              39                       NA                 1102\n  PISAScoresMathScore2022 PISAScoresScienceScore2022 PISAScoresReadingScore2022\n1                     368                        376                        358\n2                     368                        376                        358\n3                     368                        376                        358\n4                     368                        376                        358\n5                     368                        376                        358\n6                     368                        376                        358\n  PISAScoresOverallScore2018\n1                         NA\n2                         NA\n3                         NA\n4                         NA\n5                         NA\n6                         NA\n```\n:::\n:::\n\n\nWith this new data, we are able to make some new visualizations. For example, the following is a graph that shows the relative PISA scores for eahc Latin American Country.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Assuming merged_data is your original data frame\namericas_pisa_long <- merged_data2 %>%\n  filter(region == 'Americas') %>%\n  group_by(country) %>%\n  summarise(\n    pisa_overall_mean = mean(OverallPisaScore2022, na.rm = TRUE),\n    pisa_math_mean = mean(PISAScoresMathScore2022, na.rm = TRUE), # Assuming you meant Math Score here\n    pisa_science_mean = mean(PISAScoresScienceScore2022, na.rm = TRUE),\n    pisa_reading_mean = mean(PISAScoresReadingScore2022, na.rm = TRUE)\n  ) %>%\n  pivot_longer(\n    cols = starts_with(\"pisa_\"),\n    names_to = \"score_type\",\n    values_to = \"score\"\n  ) %>%\n  mutate(score_type = factor(score_type, levels = c(\"pisa_overall_mean\", \"pisa_math_mean\", \"pisa_science_mean\", \"pisa_reading_mean\")))\n\n# Creating the plot\namericas_pisa_plot <- americas_pisa_long %>%\n  ggplot(aes(x = country, y = score, fill = score_type)) + \n  geom_col(position = \"dodge\") + \n  scale_y_continuous(labels = label_comma()) + \n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  labs(y = \"PISA Score\", x = \"Country\", fill = \"Score Type\") +\n  scale_fill_brewer(palette = \"Pastel1\") # Using a color palette for better visual distinction\n\namericas_pisa_plot\n```\n\n::: {.cell-output-display}\n![](post-5_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npisa_summary <- merged_data2 |>\n  group_by(country) |>\n  summarise(\n    mean_primary_completion_rate = mean(comp_prim_v2_m, na.rm = TRUE),\n    obs_primary_completion_rate = sum(!is.na(comp_prim_v2_m)),\n    percent_people_not_in_primary_school = mean(eduout_upsec_m, na.rm = TRUE),\n    mean_educ_years_20_24 = mean(eduyears_2024_m, na.rm = TRUE),\n    attend_higher_education = mean(attend_higher_1822_m, na.rm = TRUE),\n    number_complete_prim_1524 = mean(comp_prim_1524_no, na.rm = TRUE),\n    pisa_overall_mean = mean(OverallPisaScore2022),\n    pisa_math_mean = mean(PISAScoresScienceScore2022),\n    pisa_science_mean = mean(PISAScoresScienceScore2022),\n    pisa_reading_mean = mean(PISAScoresReadingScore2022)\n  )\n\npisa_summary\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 69 × 11\n   country  mean_primary_complet…¹ obs_primary_completi…² percent_people_not_i…³\n   <chr>                     <dbl>                  <int>                  <dbl>\n 1 Albania                   0.974                    230                 0.231 \n 2 Argenti…                  0.963                    453                 0.136 \n 3 Austral…                  0.993                     87                 0.0944\n 4 Austria                 NaN                          0               NaN     \n 5 Azerbai…                  0.975                    157                 0.151 \n 6 Belgium                 NaN                          0               NaN     \n 7 Brazil                    0.811                   4085                 0.164 \n 8 Bulgaria                NaN                          0               NaN     \n 9 Cambodia                  0.616                    851                 0.583 \n10 Canada                    0.997                     97                 0.0367\n# ℹ 59 more rows\n# ℹ abbreviated names: ¹​mean_primary_completion_rate,\n#   ²​obs_primary_completion_rate, ³​percent_people_not_in_primary_school\n# ℹ 7 more variables: mean_educ_years_20_24 <dbl>,\n#   attend_higher_education <dbl>, number_complete_prim_1524 <dbl>,\n#   pisa_overall_mean <dbl>, pisa_math_mean <dbl>, pisa_science_mean <dbl>,\n#   pisa_reading_mean <dbl>\n```\n:::\n:::\n\n\nUsing this data, we have also made some relatively simple multivariate regression models. The linear regression model below examines the relationship betwee the PISA math score, and factors such as primary school completition rate, % of people not in primary school, mean education years for 20-24 yera olds, and % of people who attend higher education. From the coefficients it seems that all of these factors have a positive linear relationship with the PISA math score. However, the mean education years for 20-24 year olds has a negative relationship which is not what we would expect. This may be due to some sort of colinearity or homoscedacity, which we plan to examine in this coming week.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm_model <- \n  linear_reg() |> \n  set_engine(\"lm\")\n\nlm_form_fit2 <- \n  lm_model |> \n  fit(pisa_math_mean ~ mean_primary_completion_rate + percent_people_not_in_primary_school + mean_educ_years_20_24 + attend_higher_education, data = pisa_summary)\n\nlm_form_fit2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nparsnip model object\n\n\nCall:\nstats::lm(formula = pisa_math_mean ~ mean_primary_completion_rate + \n    percent_people_not_in_primary_school + mean_educ_years_20_24 + \n    attend_higher_education, data = data)\n\nCoefficients:\n                         (Intercept)          mean_primary_completion_rate  \n                              231.47                                339.55  \npercent_people_not_in_primary_school                 mean_educ_years_20_24  \n                               22.55                                -17.28  \n             attend_higher_education  \n                              201.50  \n```\n:::\n:::\n\nHere, we can see that the r^2 value is 0.353 which is not a super high r^2 value, so we will continue to refine our modeling in the coming week. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nbroom::glance(lm_form_fit2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 12\n  r.squared adj.r.squared sigma statistic p.value    df logLik   AIC   BIC\n      <dbl>         <dbl> <dbl>     <dbl>   <dbl> <dbl>  <dbl> <dbl> <dbl>\n1     0.353         0.201  40.2      2.32  0.0988     4  -110.  231.  238.\n# ℹ 3 more variables: deviance <dbl>, df.residual <int>, nobs <int>\n```\n:::\n\n```{.r .cell-code}\nbroom::augment(lm_form_fit2, new_data = pisa_summary)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 69 × 13\n   .pred .resid country    mean_primary_completion_rate obs_primary_completion…¹\n   <dbl>  <dbl> <chr>                             <dbl>                    <int>\n 1  418.  -42.3 Albania                           0.974                      230\n 2  447.  -41.3 Argentina                         0.963                      453\n 3  NaN   NaN   Australia                         0.993                       87\n 4  NaN   NaN   Austria                         NaN                            0\n 5  406.  -26.1 Azerbaijan                        0.975                      157\n 6  NaN   NaN   Belgium                         NaN                            0\n 7  379.   24.2 Brazil                            0.811                     4085\n 8  NaN   NaN   Bulgaria                        NaN                            0\n 9  360.  -12.5 Cambodia                          0.616                      851\n10  NaN   NaN   Canada                            0.997                       97\n# ℹ 59 more rows\n# ℹ abbreviated name: ¹​obs_primary_completion_rate\n# ℹ 8 more variables: percent_people_not_in_primary_school <dbl>,\n#   mean_educ_years_20_24 <dbl>, attend_higher_education <dbl>,\n#   number_complete_prim_1524 <dbl>, pisa_overall_mean <dbl>,\n#   pisa_math_mean <dbl>, pisa_science_mean <dbl>, pisa_reading_mean <dbl>\n```\n:::\n:::\n",
    "supporting": [
      "post-5_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}